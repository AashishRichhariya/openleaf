@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  --background: #ffffff;
  --foreground: #171717;
}

@media (prefers-color-scheme: dark) {
  :root {
    --background: #0a0a0a;
    --foreground: #ededed;
  }
}

body {
  color: var(--foreground);
  background: var(--background);
  font-family: Arial, Helvetica, sans-serif;
}

@layer components {
  /* Base editor components */
  .editor-root {
    @apply min-h-screen w-full flex justify-center bg-background;
  }

  .editor-area {
    @apply w-full max-w-4xl flex-grow flex flex-col relative bg-green-900 px-8 py-12 cursor-text;
  }

  .editor-input {
    @apply flex-1 resize-none outline-none caret-foreground;
  }

  .editor-placeholder {
    @apply absolute top-12 left-8 text-gray-400 pointer-events-none select-none;
  }

  /* Node-specific styles */
  .editor-heading-h1 {
    @apply text-4xl font-bold mt-6 mb-4;
  }

  .editor-heading-h2 {
    @apply text-3xl font-bold mt-5 mb-3;
  }

  .editor-heading-h3 {
    @apply text-2xl font-bold mt-4 mb-2;
  }

  .editor-quote {
    @apply border-l-4 border-gray-300 pl-4 my-4 italic text-gray-300;
  }

  .editor-code {
    @apply bg-gray-100 p-2 rounded font-mono text-sm;
  }

  /* Base list styles */
   .editor-list-ul {
    @apply p-0 m-0 list-disc list-outside;
  }

  .editor-list-ol {
    @apply p-0 m-0 list-decimal list-outside;
  }

  /* List item styles */
  .editor-listitem {
    @apply mx-8;
  }

  /* Nested list item */
  .editor-nested-listitem {
    @apply list-none;
  }

  /* Different depth ordered lists styles */
  .editor-list-ol1 {
    @apply p-0 m-0 list-decimal list-outside;
  }

  .editor-list-ol2 {
    @apply p-0 m-0 list-[upper-roman] list-outside;
  }

  .editor-list-ol3 {
    @apply p-0 m-0 list-[lower-roman] list-outside;
  }

  .editor-list-ol4 {
    @apply p-0 m-0 list-[upper-alpha] list-outside;
  }

  .editor-list-ol5 {
    @apply p-0 m-0 list-[lower-alpha] list-outside;
  }

  /* Different depth unordered lists styles */
  .editor-list-ul1 {
    @apply p-0 m-0 list-disc list-outside;
  }

  .editor-list-ul2 {
    @apply p-0 m-0 list-[circle] list-outside;
  }

  .editor-list-ul3 {
    @apply p-0 m-0 list-[square] list-outside;
  }

  /* Checkbox list styles */
  .editor-checklist {
    @apply p-0 m-0 list-none;
  }

  /* Base checkbox item styles */
  .editor-listitem-checked,
  .editor-listitem-unchecked {
    @apply relative mx-2 px-6 list-none outline-none;
  }

  /* Checked state */
  .editor-listitem-checked {
    @apply line-through;
  }

  /* Checkbox appearance */
  .editor-listitem-checked::before,
  .editor-listitem-unchecked::before {
    @apply content-[''] absolute w-4 h-4 top-0.5 left-0 cursor-pointer block bg-cover;
  }

  .editor-listitem-unchecked::before {
    @apply border border-gray-400 rounded;
  }

  .editor-listitem-checked::before {
    @apply border border-blue-500 rounded bg-blue-500 bg-no-repeat;
  }

  /* Checkmark */
  .editor-listitem-checked::after {
    @apply content-[''] cursor-pointer border-white border-solid absolute block top-1.5 w-[3px] left-[7px] right-[7px] h-1.5 rotate-45 border-0 border-r-2 border-b-2;
  }

  /* Hide original checkbox for nested items */
  .editor-nested-listitem::before,
  .editor-nested-listitem::after {
    @apply hidden;
  }

  /* Ensure nested checkboxes maintain proper positioning */
  .editor-nested-listitem .editor-listitem-checked,
  .editor-nested-listitem .editor-listitem-unchecked {
    @apply relative mx-2;
  }

  /* RTL support */
  .editor-listitem-checked[dir='rtl']::before,
  .editor-listitem-unchecked[dir='rtl']::before {
    @apply left-auto right-0;
  }

  /* Focus styles */
  .editor-listitem-checked:focus::before,
  .editor-listitem-unchecked:focus::before {
    @apply outline-none;
  }
  /* Indentation support */
  .editor-indent {
    --indent-base-value: 40px;
  }

  /* Typeahead Menu Components */
  .typeahead-popover {
    @apply fixed bg-background shadow-lg rounded-lg py-2;
  }

  .typeahead-popover ul {
    @apply p-0 m-0 list-none rounded-lg max-h-64 overflow-y-scroll;
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  .typeahead-popover ul::-webkit-scrollbar {
    @apply hidden;
  }

  .typeahead-popover ul li {
    @apply m-0 min-w-[180px] text-sm outline-none cursor-pointer rounded-lg;
  }

  .typeahead-popover ul li.selected {
    @apply bg-gray-500;
  }

  .typeahead-popover li {
    @apply mx-2 p-2 text-foreground cursor-pointer leading-4 text-sm flex items-center flex-row flex-shrink-0 bg-background rounded-lg border-0;
  }

  .typeahead-popover li.active {
    @apply flex w-5 h-5 bg-contain;
  }

  .typeahead-popover li:first-child {
    @apply rounded-t-lg;
  }

  .typeahead-popover li:last-child {
    @apply rounded-b-lg;
  }

  .typeahead-popover li:hover {
    @apply bg-gray-500;
  }

  .typeahead-popover li .text {
    @apply flex leading-5 flex-grow min-w-[150px];
  }

  .typeahead-popover li .icon {
    @apply flex w-5 h-5 select-none mr-2 leading-4 bg-contain bg-no-repeat bg-center;
  }

  /* Component Picker Specific */
  .component-picker-menu {
    @apply w-[200px];
  }

  .component-picker-menu .item {
    @apply items-center cursor-pointer flex flex-row p-2 mx-2 rounded;
  }

  .component-picker-menu .item.selected {
    @apply bg-gray-500;
  }

  .component-picker-menu .item:hover {
    @apply bg-gray-500;
  }

  .component-picker-menu .item .icon {
    @apply flex mr-2 w-5 h-5 select-none;
  }

  .component-picker-menu .item .text {
    @apply flex leading-5 flex-grow min-w-[150px];
  }

  /* Table wrapper */
  .editor-table-scrollable-wrapper {
    @apply overflow-x-auto my-0 mr-6 ml-0;
  }

  /* Base table */
  .editor-table {
    @apply border-collapse border-2 border-gray-400 table-fixed w-full mt-6 mb-8 min-w-[200px];
  }

  /* Table alignment */
  .editor-table-align-center {
    @apply mx-auto;
  }

  .editor-table-align-right {
    @apply ml-auto;
  }

  /* Table cells */
  .editor-table-cell {
    @apply border border-gray-300 align-top text-left p-2 relative outline-none bg-slate-600;
  }

  /* Table header cells */
  .editor-table-cell-header {
    @apply border border-gray-300 bg-slate-800 text-left;
  }

  /* Selected states */
  .editor-table-selected {
    @apply outline-2 outline outline-blue-500;
  }

  .editor-table-cell-selected {
    @apply caret-transparent relative;
  }

  .editor-table-cell-selected::after {
    @apply absolute inset-0 bg-blue-200/50 mix-blend-multiply
           content-[''] pointer-events-none;
  }

  /* Row striping */
  .editor-table-row-striping tr:nth-child(even) {
    @apply bg-slate-500;
  }

  /* Frozen columns/rows */
  .editor-table-frozen-row {
    @apply overflow-x-clip;
  }

  .editor-table-frozen-row tr:first-child > td {
    @apply overflow-clip bg-slate-500 sticky z-10 top-[44px];
  }

  .editor-table-frozen-row tr:first-child > th {
    @apply overflow-clip bg-slate-500 sticky z-10 top-[44px];
  }

  /* Cell resizer */
  .editor-table-cell-resizer {
    @apply absolute -right-1 h-full w-2 cursor-ew-resize z-10 top-0;
  }

  /* Add columns/rows buttons */
  .editor-table-add-columns,
  .editor-table-add-rows {
    @apply absolute bg-gray-200 animate-[table-controls_0.2s_ease] border-0
           cursor-pointer hover:bg-blue-100;
  }

  .editor-table-add-columns {
    @apply h-full;
  }

  .editor-table-add-rows {
    @apply w-[calc(100%-25px)];
  }

  /* Cell action button */
  .editor-table-cell-action-button-container {
    @apply absolute right-1 top-1.5 z-10 w-5 h-5;
  }

  .editor-table-cell-action-button {
    @apply bg-gray-200 border-0 rounded-full w-5 h-5 text-gray-800
           cursor-pointer hover:bg-gray-300;
  }

  /* Selection handling */
  .editor-table-selection *::selection {
    @apply bg-transparent;
  }

  /* Animation for controls */
  @keyframes table-controls {
    from { @apply opacity-0; }
    to { @apply opacity-100; }
  }

  /* Inline Table Input styles */
  .editor-table-input-wrapper {
    @apply inline-block;
  }

  .editor-table-input {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    font-size: inherit;
    line-height: inherit;
    user-select: none;
  }

  .editor-table-input input {
    width: 40px;
    height: 24px;
    padding: 2px 4px;
    font-size: inherit;
    border: 1px solid #e2e8f0;
    border-radius: 4px;
    background-color: rgba(240, 240, 245, 0.3);
    color: #333;
    text-align: center;
  }

  .editor-table-input input:focus {
    outline: none;
    border-color: #3b82f6;
    background-color: rgba(240, 240, 245, 0.5);
    box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.3);
  }

  .editor-table-input input::placeholder {
    color: #9ca3af;
    opacity: 0.8;
  }

  /* Hide number input spinner buttons */
  .editor-table-input input::-webkit-outer-spin-button,
  .editor-table-input input::-webkit-inner-spin-button {
    -webkit-appearance: none;
    margin: 0;
  }
  .editor-table-input input[type=number] {
    -moz-appearance: textfield;
  }
}
